---
import Wrapper from "../../components/Base/Common/Wrapper.astro";
import ArticleCard from "../../components/Base/Services/Articles/ArticleCard.astro";
import BaseLayout from "../../components/Layouts/BaseLayout.astro";
import RandomArticleBtn from "../../components/Base/Services/Articles/RandomArticleBtn.astro";
import { getCollection } from "astro:content";
import { getFormattedDate, getReadTime } from "../../utils/utils";

const articles = await getCollection("articles");
---

<!-- Needs pagination, filter, search, sort -->
<BaseLayout title="Article">
  <Wrapper>
    <h2>Work in progress!</h2>
    <ul>
      {
        articles.map((article) => (
          <ArticleCard
            article={article}
            readTime={getReadTime(article.body)}
            date={getFormattedDate(article.data.pubDate)}
          />
        ))
      }
    </ul>
    <RandomArticleBtn articles={articles} />
  </Wrapper>
</BaseLayout>

<style>
  ul {
    margin-bottom: 15px;
  }
</style>
